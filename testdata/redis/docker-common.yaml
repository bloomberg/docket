version: "3.2"

services:
    client:
        image: golang
        environment:
            - "GOPATH=/go"
            - "REDIS_ADDR=redis:6379"
        volumes:
            - type: bind
              source: ${GOPATH}
              target: /go
        command: ["/bin/bash", "-c", "tail -f /dev/null & trap 'kill %1 ; exit' SIGTERM ; wait"]

    redis:
        image: redis:4
